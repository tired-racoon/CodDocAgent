## ClassDef VectorStoreManager
**VectorStoreManager**: Функция VectorStoreManager предназначена для управления векторным хранилищем, включая создание и поиск по нему.

**Attributes**:
* параметр 1: `top_k` — количество наиболее похожих документов, которые будут возвращаться при поиске;
* параметр 2: `llm` — языковая модель, используемая для синтеза ответов.

**Описание кода**:

Класс `VectorStoreManager` предназначен для работы с векторным хранилищем, созданным с помощью библиотеки Chroma. В конструкторе (`__init__`) инициализируются параметры, такие как `top_k` и `llm`, а также путь к базе данных Chroma и имя коллекции.

Метод `create_vector_store` добавляет содержимое Markdown и метаданные в индекс. Для этого используется модель встраивания `OpenAIEmbedding` и семантический чанкер `SemanticSplitterNodeParser`. Затем документы сохраняются в векторном хранилище `ChromaVectorStore`.

Метод `query_store` выполняет поиск по векторному хранилищу и возвращает наиболее релевантные документы. Для этого используется `RetrieverQueryEngine`, который обрабатывает запросы и возвращает результаты.

**Примечание**:
При использовании класса `VectorStoreManager` необходимо убедиться, что модель `llm` и ключи API (`api_key`, `api_base`) настроены правильно. Также важно проверить, что содержимое Markdown и метаданные соответствуют друг другу по длине.

**Пример вывода**:

```python
vector_store_manager = VectorStoreManager(top_k=5, llm="your_language_model")
vector_store_manager.create_vector_store(md_contents, meta_data, api_key, api_base)
results = vector_store_manager.query_store(query)
```
### FunctionDef __init__(self, top_k, llm)
**__init__**: Функция `__init__` инициализирует объект `VectorStoreManager`.

**parameters**:
* параметр 1: `top_k`
* параметр 2: `llm`

**Описание кода**:
Функция `__init__` принимает два параметра: `top_k` и `llm`. Она инициализирует внутренние атрибуты объекта `VectorStoreManager`:
* `self.query_engine` устанавливается как `None`.
* `self.chroma_db_path` задаётся как путь к базе данных Chroma (по умолчанию `"./chroma_db"`).
* `self.collection_name` устанавливается как имя коллекции (по умолчанию `"test"`).
* `self.similarity_top_k` сохраняет значение параметра `top_k`.
* `self.llm` сохраняет значение параметра `llm`.

**Примечание**:
При создании экземпляра `VectorStoreManager` необходимо передать значения для параметров `top_k` и `llm`, чтобы корректно инициализировать объект.
***
### FunctionDef create_vector_store(self, md_contents, meta_data, api_key, api_base)
**create_vector_store**: Функция `create_vector_store` создаёт векторное хранилище (Vector Store) для хранения и поиска документов на основе их содержимого и метаданных.

**parameters**:
- `md_contents`: список строк с содержимым документов в формате Markdown.
- `meta_data`: список словарей с метаданными для каждого документа.
- `api_key`: ключ API для доступа к модели встраивания текста (embedding model).
- `api_base`: базовый URL для API модели встраивания текста.

**Описание кода**:

Функция `create_vector_store` выполняет следующие действия:
1. Проверяет наличие содержимого и метаданных. Если они отсутствуют, выводит предупреждение и завершает работу.
2. Убеждается, что длины списков `md_contents` и `meta_data` совпадают, и обрезает более длинный список до минимальной длины.
3. Инициализирует клиент ChromaDB и коллекцию.
4. Определяет модель встраивания текста (`OpenAIEmbedding`) с использованием заданного API ключа и базового URL.
5. Инициализирует семантический чанкер (`SemanticSplitterNodeParser`) для разделения документов на семантические чанки.
6. Создаёт список документов (`Document`), объединяя содержимое и метаданные.
7. Обрабатывает каждый документ: сначала пытается разделить его на семантические чанки, а затем, в случае неудачи, на предложения.
8. Инициализирует векторное хранилище (`ChromaVectorStore`) и загружает в него данные.
9. Создаёт индекс (`VectorStoreIndex`) для поиска по векторному хранилищу.
10. Настраивает механизм поиска (`VectorIndexRetriever`) и синтезатор ответов (`ResponseSynthesizer`).
11. Устанавливает движок запросов (`RetrieverQueryEngine`) для выполнения запросов к векторному хранилищу.

**Примечание**:
При использовании функции `create_vector_store` необходимо убедиться, что модели встраивания текста доступны и правильно настроены. Также важно правильно настроить метаданные для каждого документа, чтобы обеспечить эффективный поиск.

**Пример вывода**:
Создано и загружено векторное хранилище с {len(documents)} документами.
***
### FunctionDef query_store(self, query)
**query_store**: Функция query_store выполняет запрос к векторному хранилищу для получения релевантных документов.

**parameters**:
* параметр 1: query — строка с запросом для поиска в векторном хранилище.

**Описание кода**:
Функция query_store принимает на вход строку с запросом и выполняет поиск в векторном хранилище с помощью метода query_engine.query(). Если объект query_engine не инициализирован, функция выводит сообщение об ошибке и возвращает пустой список. В противном случае функция возвращает список словарей, каждый из которых содержит текст ответа и метаданные, полученные из результатов поиска.

**Примечание**:
Перед использованием функции необходимо убедиться, что объект query_engine инициализирован и готов к работе.

**Пример вывода**:
```
[
    {
        "text": "результаты поиска",
        "metadata": "метаданные"
    }
]
```
***
